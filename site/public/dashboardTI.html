<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Dashboard | Bem vindo(a)!</title>

    <!-- Montserrat Font -->
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">

    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="./css/usoGeralDash.css">
    <link rel="stylesheet" href="./css/dashboardGerente.css">
    <link rel="stylesheet" href="./css/cadastrosDash.css">
    <link rel="stylesheet" href="./css/chamadosDash.css">
    <link rel="stylesheet" href="./css/relatoriosDash.css">
    <link rel="stylesheet" href="./css/configDash.css">
    <link rel="stylesheet" href="./css/dashboardTi.css">
    <!-- Favicon -->
    <link rel="shortcut icon" href="./assets/Symbol_tracking.png" type="image/x-icon">
</head>

<body onload="buscarDados()">
    <div class="grid-container">
        <!-- Header -->
        <header class="header">
            <div class="menu-icon" onclick="openSidebar()">
                <span class="material-icons-outlined">menu</span>
            </div>
            <div class="header-left">
                <p class="client-name-p">Olá, <b id="clientName"></b></p>
        </header>
        <!-- End Header -->

        <!-- Sidebar -->
        <aside id="sidebar">

            <div class="sidebar-title">
                <div class="sidebar-brand">
                    <a href="dashboard.html">
                        <img src="assets/logo-tracking-monitor__1_-removebg-preview.png" id="logo">
                    </a>

                </div>
                <span class="material-icons-outlined" onclick="closeSidebar()">close</span>
            </div>

            <!-- :BARRA DE NAVEGAÇÃO -->
            <ul class="sidebar-list">
                <li class="sidebar-list-item" onclick="mostrarPainelDeControle()">
                    <div class="btn-side">
                        <span class="material-icons-outlined">poll</span>
                        Painel de controle
                    </div>
                </li>
                <li class="sidebar-list-item" onclick="mostrarRelatorios()">
                    <div class="btn-side">
                        <span class="material-icons-outlined">description</span>
                        Relatórios
                    </div>
                </li>

                <li class="sidebar-list-item" onclick="mostrarSuporte()">
                    <div class="btn-side">
                        <span class="material-icons-outlined">call</span>
                        Suporte
                    </div>
                </li>
                <li class="sidebar-list-item" id="from1" onclick="logout()">
                    <div class="btn-side">
                        <span class="material-icons-outlined">logout</span>
                        Sair
                    </div>
                </li>
            </ul>
        </aside>

        <!-- Main -->
        <main class="main-container">
            <!-- Container dashboard -->
            <div class="container-maquinas" id="containerMaquinas">
                <div style="width: 100%;">
                    <div class="caixa-botao-add" id="botaoMaquina" onclick="mostrarConfig() ">
                        <span class="material-icons-outlined btn-add">
                            settings
                        </span>
                        Alertas
                    </div>
                </div>
                <div class="caixa-maquina tam01" onclick="mostrarDashboard()" style="cursor: pointer;">
                    <Span style="font-size: 20px;">Caixa 01</Span>
                    <div class="kpi"></div>
                    <img src="./assets/img-computer-tracking-removebg-preview.png" class="computer" alt="">
                    <span>Estado: Inativo</span>
                    <span>Internet: Ok</span>
                </div>
                <div class="caixa-maquina tam01" onclick="mostrarDashboard()" style="cursor: pointer;">
                    <Span style="font-size: 20px;">Caixa 01</Span>
                    <div class="kpi"></div>
                    <img src="./assets/img-computer-tracking-removebg-preview.png" class="computer" alt="">
                    <span>Estado: Inativo</span>
                    <span>Internet: Ok</span>
                </div>
                <div class="caixa-maquina tam01" onclick="mostrarDashboard()" style="cursor: pointer;">
                    <Span style="font-size: 20px;">Caixa 01</Span>
                    <div class="kpi"></div>
                    <img src="./assets/img-computer-tracking-removebg-preview.png" class="computer" alt="">
                    <span>Estado: Inativo</span>
                    <span>Internet: Ok</span>
                </div>
            </div>
            <!-- Container dashboard TI -->
            <div class="container-dashboard" id="containerDashboard" onclick="mostrarDashboard()">
                <div class="titulo">
                    DASHBOARD
                </div>
                <div class="identificacao-maquina">
                    <div class="bloco-identificacao">
                        <span>
                            Nome da máquina:
                        </span>
                        <span>
                            Sistema oeracional:
                        </span>
                        <span>
                            Ip:
                        </span>
                    </div>
                    <div class="material-icons-outlined" style="font-size: 75px;">
                        desktop_windows
                    </div>
                </div>
                <div class="container-cards">
                    <div class="card flex-tam1">
                        <span class="name-card">
                            CPU
                        </span>
                        <div class="chart-svg">
                            <svg viewBox="0 0 36 36" class="circular-chart pink">
                                <path class="circle-bg" d="M18 2.0845
                      a 15.9155 15.9155 0 0 1 0 31.831
                      a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                                <path class="circle" stroke-dasharray="30, 100" d="M18 2.0845
                      a 15.9155 15.9155 0 0 1 0 31.831
                      a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                                <text x="18" y="20.35" class="percentage">30%</text>
                            </svg>
                        </div>
                        <Span class="infos">
                            Modelo:
                        </Span>
                        <Span class="infos">
                            Capacidade:
                        </Span>
                        <Span class="infos">
                            Temperatura:
                        </Span>
                    </div>
                    <div class="card flex-tam1">
                        <span class="name-card">
                            RAM
                        </span>
                        <div class="chart-svg">
                            <svg viewBox="0 0 36 36" class="circular-chart pink">
                                <path class="circle-bg" d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                                <path class="circle" stroke-dasharray="30, 100" d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                                <text x="18" y="20.35" class="percentage">30%</text>
                            </svg>
                        </div>
                        <Span class="infos">
                            Modelo:
                        </Span>
                        <Span class="infos">
                            Capacidade:
                        </Span>
                        <Span class="infos">
                            Temperatura:
                        </Span>
                    </div>
                    <div class="card flex-tam1" style="border: none;">
                        <span class="name-card">
                            HD
                        </span>
                        <div class="chart-svg">
                            <svg viewBox="0 0 36 36" class="circular-chart pink">
                                <path class="circle-bg" d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                                <path class="circle" stroke-dasharray="30, 100" d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                                <text x="18" y="20.35" class="percentage">30%</text>
                            </svg>
                        </div>
                        <Span class="infos">
                            Modelo:
                        </Span>
                        <Span class="infos">
                            Capacidade:
                        </Span>
                        <Span class="infos">
                            Temperatura:
                        </Span>
                    </div>
                </div>
            </div>


            <!-- Container relatorios -->
            <div class="container-relatorios" id="containerRelatorios">
                <table>
                    <caption>Relatórios</caption>
                    <thead>
                        <tr>
                            <th scope="col">Ip Máquina</th>
                            <th scope="col">Data</th>
                            <th scope="col">Max CPU</th>
                            <th scope="col">Max RAM</th>
                            <th scope="col">Max HD</th>

                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td data-label="Account">001</td>
                            <td data-label="Due Date">04/01/2016</td>
                            <td data-label="Amount">90%</td>
                            <td data-label="Period">15%</td>
                            <td data-label="Period">15%</td>
                        </tr>
                        <tr>
                            <td data-label="Account">001</td>
                            <td data-label="Due Date">04/01/2016</td>
                            <td data-label="Amount">90%</td>
                            <td data-label="Period">15%</td>
                            <td data-label="Period">15%</td>
                        </tr>
                        <tr>
                            <td data-label="Account">001</td>
                            <td data-label="Due Date">04/01/2016</td>
                            <td data-label="Amount">90%</td>
                            <td data-label="Period">15%</td>
                            <td data-label="Period">15%</td>
                        </tr>
                        <tr>
                            <td data-label="Account">001</td>
                            <td data-label="Due Date">04/01/2016</td>
                            <td data-label="Amount">90%</td>
                            <td data-label="Period">15%</td>
                            <td data-label="Period">15%</td>
                        </tr>

                        <tr>
                            <td data-label="Account">001</td>
                            <td data-label="Due Date">04/01/2016</td>
                            <td data-label="Amount">90%</td>
                            <td data-label="Period">15%</td>
                            <td data-label="Period">15%</td>
                        </tr>

                        <tr>
                            <td data-label="Account">001</td>
                            <td data-label="Due Date">04/01/2016</td>
                            <td data-label="Amount">90%</td>
                            <td data-label="Period">15%</td>
                            <td data-label="Period">15%</td>
                        </tr>

                        <tr>
                            <td data-label="Account">001</td>
                            <td data-label="Due Date">04/01/2016</td>
                            <td data-label="Amount">90%</td>
                            <td data-label="Period">15%</td>
                            <td data-label="Period">15%</td>
                        </tr>

                        <tr>
                            <td data-label="Account">001</td>
                            <td data-label="Due Date">04/01/2016</td>
                            <td data-label="Amount">90%</td>
                            <td data-label="Period">15%</td>
                            <td data-label="Period">15%</td>
                        </tr>

                    </tbody>
                </table>
            </div>

            <!-- Container configurações -->
            <div class="container-config" id="containerConfig">
                <div class="div-voltar">
                    <button class="btn-voltar" onclick="mostrarPainelDeControle()">
                        &#171;
                    </button>
                </div>
                <div style="display: flex; justify-content: center; width: 100%; gap: 15px;">
                    <div class="bloco-hardware">
                        <div class="nome-hardware" style="gap: 35px; margin-top: 20px;">
                            <Span>
                                Cpu:
                            </Span>
                            <Span>
                                Ram:
                            </Span>
                            <Span>
                                Ssd:
                            </Span>
                        </div>
                    </div>
                    <div class="bloco-hardware">
                        <Span style="font-size: 20px; font-weight: 600; color: tomato; ">
                            Limite %
                        </Span>
                        <div class="nome-hardware">
                            <Span>
                                <input class="input" placeholder="Porcentagem">
                            </Span>
                            <Span>
                                <input class="input" placeholder="Porcentagem">
                            </Span>
                            <Span>
                                <input class="input" placeholder="Porcentagem">
                            </Span>
                        </div>
                    </div>
                </div>

                <div class="container-btn-salvar" id="btnConfig">
                    <button class="btn-salvar">
                        salvar
                    </button>
                </div>
            </div>

            <!-- Container suporte -->
            <div class="container-suporte" id="containerSuporte">
                <table>
                    <caption>Suporte</caption>
                    <thead>
                        <tr>
                            <th scope="col">ID Chamado</th>
                            <th scope="col">Hostname</th>
                            <th scope="col">Localidade</th>
                            <th scope="col">Descrição</th>
                            <th scope="col">Situação</th>
                            <th scope="col">Overview</th>

                        </tr>
                    </thead>

                </table>
            </div>

            <!-- End Main -->


            <!-- Scripts -->
            <!-- ApexCharts -->
            <script src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.35.3/apexcharts.min.js"></script>
            <!-- Custom JS -->
            <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.10.1/dist/sweetalert2.all.min.js"></script>
            <script src="./js/sidebarTi.js"></script>
            <script>
                clientName.innerHTML = sessionStorage.NOME_PERFIL;
            </script>
</body>

</html>

<script>
    function buscarDados() {
        fetch(`/maquina/buscarDadosTi/`, {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                fkIdTi: sessionStorage.ID_PERFIL
            })
        }).then(function (resposta) {

            console.log("resposta: ", resposta);

            if (resposta.ok) {

                resposta.json().then(function (resposta) {
                    console.log("Dados recebidos: ", JSON.stringify(resposta));

                    for (let i = 0; i < resposta.length; i++) {

                        containerMaquinas.innerHTML += `
            <div class="caixa-maquina tam01">
                <Span style="font-size: 20px;">${resposta[i].nomeMaquina}</Span>
                <div class="kpi"></div>
                <img src="./assets/img-computer-tracking-removebg-preview.png" class="computer" alt="">
                <span>Id: ${resposta[i].idMaquinaCorporativa}</span>
                <span>IP: ${resposta[i].IP}</span>
                <span>Sitema operacional: ${resposta[i].sistemaOperacional}</span>
            </div>
                        `
                        // var idCluster = resposta[i].id

                        // buscarDadosMaquina(idCluster);
                    }
                });


                console.log(resposta);
                // limparFormulario();
                // finalizarAguardar();
            } else {
                throw ("Houve um erro ao tentar realizar o cadastro!");
            }
        }).catch(function (resposta) {
            console.log(`#ERRO: ${resposta}`);
            // finalizarAguardar();
        });
    }
</script>